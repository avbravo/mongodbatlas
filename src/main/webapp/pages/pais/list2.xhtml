<!DOCTYPE html>
<ui:composition   template="/WEB-INF/layout/template.xhtml"
                  xmlns="http://www.w3.org/1999/xhtml"
                  xmlns:h="http://xmlns.jcp.org/jsf/html"
                  xmlns:f="http://xmlns.jcp.org/jsf/core"
                  xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                  xmlns:p="http://primefaces.org/ui"
                  xmlns:jmoordbjsf="http://jmoordbjsf.com/taglib">
    <ui:define name="content">


    <ui:define name="titulo">#{msg['title.pagina']} - #{msg['application.title']}</ui:define>

    <ui:define name="contenido">
        <h:outputStylesheet library="css" name="extras.css"/>
        <h:outputStylesheet name="primeicons/primeicons.css" library="primefaces" />

        <p:messages  closable="true" >
            <p:autoUpdate />
        </p:messages>


        <!-- START CONTENT -->
        <section id="content">
            <div class="container">
                
        <b:form id="form"  prependId="false"  onkeypress="if (event.keyCode == 13) {
                    return false;
                }">

            <b:growl id="msgs"/>
            <p:outputPanel  id="content"  deferred="true" deferredMode="visible"/>
            <p:dialog widgetVar="searchDialog" header="#{app['dialog.search']}" 
                      modal="true"
                      responsive="true"
                      width="450" height="250"
                      showEffect="clip" hideEffect="clip">
                <p:panelGrid id="searchDetails"  columns="2" styleClass="ui-panelgrid-blank" > 

                    <p:outputLabel value="#{msg['field.idrol']}"/>
                    <jmoordbjsf:autocomplete converter="#{paisConverter}"
                                             completeMethod="#{paisController.paisServices.complete}"
                                             labeltip1="#{msg['field.idrol']} #{p.idrol}"
                                             labeltip2="#{msg['field.rol']} #{p.rol}"
                                             listener="#{paisController.handleAutocompleteOfListXhtml}"
                                             value="#{paisController.paisSearch}"
                                             itemLabel="#{p.idpais}"
                                             field="idpais"
                                             dropdown="true"
                                             minQueryLength="0"
                                             update=":form:dataTable"/>

                    <p:outputLabel value="#{msg['field.pais']}"/>
                    <jmoordbjsf:autocomplete converter="#{paisConverter}"
                                             completeMethod="#{paisController.paisServices.complete}"
                                             labeltip1="#{msg['field.idpais']} #{p.idpais}"
                                             labeltip2="#{msg['field.pais']} #{p.pais}" 
                                             listener="#{paisontroller.handleAutocompleteOfListXhtml}"
                                             value="#{paisController.paisSearch}"
                                             itemLabel=" #{p.pais}"
                                             field="pais"
                                             dropdown="true"
                                             minQueryLength="0"
                                             update=":form:dataTable"/>

                </p:panelGrid>
            </p:dialog>


            <b:panel title="#{msg['titlelist.rol']}" collapsible="false" id="dataTable" look="primary">

                <jmoordbjsf:paginator
                    controller="#{paisController}"                        
                    rowPage="#{paisController.rowPage}"                   
                    page="#{paisController.page}"
                    pages="#{paisController.pages}"
                    skip="ajax:paisController1.skip()" 
                    url = "/pages/rol/new.xhtml"
                    />
                <p:dataTable value="#{paisController.paisDataModel}"
                             var="item"
                             id="dataTable2"
                             paginator="false"
                             selection="#{paisController.paisListSelected}"
                             rowKey="#{item.idpais}" 
                             style="margin-bottom:0"
                             reflow="true">
                    <p:column selectionMode="multiple" style="width:30px;text-align:center"/>
                    <p:column  headerText="#{msg['field.idrol']}">
                        <p:outputLabel value="#{item.idpais}"/>
                    </p:column>
                    <p:column  headerText="#{msg['field.pais']}" >
                        <p:outputLabel value="#{item.pais}"/>
                    </p:column>


                    <p:column headerText="" style="width:80px">

                        <jmoordbjsf:column

                            renderedEdit="true"
                            renderedDelete="true"
                            controller="#{paisController}"
                            url="/pages/pais/view.xhtml"
                            item="#{item}"

                            />
                    </p:column>

                </p:dataTable>
            </b:panel>


            <p:dialog header="#{app['dialog.delete']}"  widgetVar="deleteListDialog" modal="true" showEffect="fade" hideEffect="fade" resizable="false"
                      width="650" height="350">

                <p:outputPanel id="deleteListDetail" style="text-align:center;">
                    <p:dataList value="#{paisController.paislListSelected}" var="item" type="definition" >
                        <f:facet name="header">
                            <p:outputLabel value="#{app['dialogdelete.datafordelete']}"/>
                        </f:facet>
                        <p:outputLabel value="#{msg['field.idpais']}"/> <p:outputLabel value="#{item.idpais}" />

                        <f:facet name="footer">
                            <b:commandButton value="#{app['button.no']}" look="success" onclick="PF('deleteListDialog').hide();"/>
                            <b:commandButton value="#{app['button.yes']}" look="danger" action="#{paislController.deleteSelected()}"
                                             update=":form:dataTable"
                                             onclick="PF('deleteListDialog').hide();"/>

                            <b:commandButton value="DELETE FROM LISTXHTML" look="danger" action="#{paisController.deleteFromListxhtml()}"
                                             update=":form:dataTable"
                                             onclick="PF('deleteListDialog').hide();"/>
                        </f:facet> 
                    </p:dataList>


                </p:outputPanel>
            </p:dialog>


        </b:form>

    </ui:define>
</ui:composition>

<!DOCTYPE html>
<ui:composition   template="/WEB-INF/layout/template.xhtml"
                  xmlns="http://www.w3.org/1999/xhtml"
                  xmlns:h="http://xmlns.jcp.org/jsf/html"
                  xmlns:f="http://xmlns.jcp.org/jsf/core"
                  xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                  xmlns:p="http://primefaces.org/ui"
                  xmlns:jmoordbjsf="http://jmoordbjsf.com/taglib">



    <ui:define name="titulo">#{msg['title.pagina']} - #{msg['application.title']}</ui:define>

    <ui:define name="contenido">
        <h:outputStylesheet library="css" name="extras.css"/>
        <h:outputStylesheet name="primeicons/primeicons.css" library="primefaces" />

        <p:messages  closable="true" >
            <p:autoUpdate />
        </p:messages>


        <!-- START CONTENT -->
        <section id="content">
            <div class="container">

                <!--**********************************************************************
                                              Despues del Tema  
                *************************************************************************-->

                <h:form id="form" class="contact-form" 
                        style="margin-left: 0.9em; margin-right: 0.9em; padding-top: 2em;" 
                        >
                    <jmoordbjsf:ajaxstatus  />

                    <p:growl id="growl" />

                    <h:panelGroup id="content">

                        <div class="row">
                            <div class="col s2">


                                <p:commandButton title="#{app['button.new']}" 
                                                 process="@this,:form:panelGroupNew"                                                 
                                                 icon="fa fa-file-o" 

                                                 action="#{paisPageController.prepareNew()}"
                                                 oncomplete="PF('dialogNew').show();" update=":form:panelGroupNew"/>       
                            </div>

                        </div>

                        <div class="row">

                        </div>
                        <div class="row">

                        </div>




                        <div>
                            <p:dataTable var="item" value="#{paisPageController.paisList}"
                                         id="datatable"
                                         paginator="true"
                                         rows="10"
                                         rowKey="#{item.idpais}" 
                                         style="margin-bottom:0"

                                         >
                                <f:facet name="header">

                                    <p:outputLabel value="#{msg['form.paises']}"/>

                                </f:facet>

                                <p:column headerText="#{msg['field.idpais']}" style="width:75px">
                                    <p:outputLabel value="#{item.idpais}" />
                                </p:column>
                                <p:column headerText="#{msg['field.pais']}" style="width:75px">
                                    <p:outputLabel value="#{item.pais}" />
                                </p:column>

                                <p:column headerText="" style="width:80px">

                                    <p:commandButton 

                                        icon="fa fa-edit" 
                                        title="#{app['button.edit']}"  


                                        oncomplete="PF('dialogView').show();" 
                                        update=":form:panelGroupView"
                                        > 
                                        <f:setPropertyActionListener value="#{item}" target="#{paisPageController.pais}" />

                                    </p:commandButton>
                                </p:column>



                            </p:dataTable>
                        </div>
                        <div class="row">
                            <div class="col s2">

                                <jmoordbjsf:autocomplete converter="#{paisConverter}"
                                                         completeMethod="#{paisPageController.paisServices.complete}"
                                                         labeltip1="#{msg['field.idpais']} #{p.idpais}" 
                                                         labeltip2="#{msg['field.pais']} #{p.pais}" 
                                                         listener="#{paisController.handleAutocompleteOfListXhtml}"
                                                         value="#{paisController.paisSearch}"
                                                         itemLabel=" #{p.idpais} -#{p.pais}"
                                                         field="idpais"
                                                         dropdown="true"
                                                         minQueryLength="0"
                                                         update=" :form:datatable"/>  
                            </div>

                            <div class="col s2">

                                <jmoordbjsf:autocomplete converter="#{paisConverter}"
                                                         completeMethod="#{paisPageController.paisServices.complete}"
                                                         labeltip1="#{msg['field.idpais']} #{p.idpais}" 
                                                         labeltip2="#{msg['field.pais']} #{p.pais}" 
                                                         listener="#{paisController.handleAutocompleteOfListXhtml}"
                                                         value="#{paisController.paisSearch}"
                                                         itemLabel=" #{p.pais} -#{p.idpais}"
                                                         field="pais"
                                                         dropdown="true"
                                                         minQueryLength="0"
                                                         update=" :form:datatable"/>  
                            </div>

                        </div>

                    </h:panelGroup>



                    <h:panelGroup id="panelGroupNew">
                        <p:dialog header="Pais" widgetVar="dialogNew" modal="true"                   
                                  id="dialogonuevo"  dynamic="true"
                                  >
                            <h:form id="formadialog">
                                <div class="row">
                                    <p:outputLabel  value="#{msg['field.idpais']}" />
                                    <p:inputText value="#{paisPageController.pais.idpais}" id="idpais"  label="#{msg['field.pais']}" />

                                </div>
                                <div class="row">
                                    <p:outputLabel  value="#{msg['field.pais']}" />
                                    <p:inputText value="#{paisPageController.pais.pais}" id="pais"  label="#{msg['field.pais']}" />

                                </div>


                                <div class="row">
                                    <p:commandButton rendered="true"                          
                                                     value="#{app['button.save']}"
                                                     icon="fa fa-floppy-o"
                                                     title="#{app['button.save']}"
                                                     action="#{paisPageController.save()}"
                                                     process=":form:panelGroupNew"
                                                     oncomplete="PF('dialogNew').hide()" 
                                                     update=":form:datatable, :form:growl"> 


                                    </p:commandButton>



                                </div>


                            </h:form>
                        </p:dialog>   






                    </h:panelGroup>
                    <h:panelGroup id="panelGroupView">
                        <p:dialog header="Editar" widgetVar="dialogView" modal="true"                   
                                  id="dialogoview"  dynamic="true" 
                                  >
                            <h:form id="formview">
                                <div class="row">
                                    <p:outputLabel  value="#{msg['field.idpais']}" />
                                    <p:outputLabel value="#{paisPageController.pais.idpais}"   />

                                </div>
                                <div class="row">
                                    <p:outputLabel  value="#{msg['field.pais']}" />
                                    <p:inputText value="#{paisPageController.pais.pais}"   label="#{msg['field.pais']}" />

                                </div>


                                <div class="row">
                                    <p:commandButton rendered="true"                          
                                                     icon="fa fa-edit" 
                                                     title="#{app['button.edit']}"  
                                                     value="#{app['button.edit']}" 
                                                     action="#{paisPageController.edit()}"
                                                     process=":form:panelGroupView"
                                                     oncomplete="PF('dialogView').hide()" 
                                                     update=":form:datatable, :form:growl"> 


                                    </p:commandButton>
                                    <p:commandButton rendered="true"                          
                                                     icon="fa fa-trash" 
                                                     title="#{app['button.delete']}"  
                                                     value="#{app['button.delete']}" 
                                                     action="#{paisPageController.delete()}"
                                                     process=":form:panelGroupView"
                                                     oncomplete="PF('dialogView').hide()" 
                                                     update=":form:datatable, :form:growl"> 


                                    </p:commandButton>



                                </div>


                            </h:form>
                        </p:dialog>   






                    </h:panelGroup>


                    <p:dialog header="Selected Cars" widgetVar="multiCarDialog" modal="true" showEffect="fade" hideEffect="fade" resizable="false" width="220">
                        <p:outputPanel id="multiCarDetail" style="text-align:center;">

                            <h:outputText value="#{paisPageController.paisSelected.idpais}"/>

                        </p:outputPanel>
                    </p:dialog>

                </h:form>




            </div>
            <!--end container-->

        </section>
        <!-- END CONTENT -->
        <!-- ================================================================================================
                                                      Scripts
                      ===================================================================================================== -->
        <jmoordbjsf:materialized-js />



    </ui:define>

</ui:composition>